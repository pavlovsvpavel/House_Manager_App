{% if not debug and GOOGLE_ANALYTICS_ID %}
    <!-- Google tag (gtag.js) -->
    <script nonce="{{ csp_nonce }}" async src="https://www.googletagmanager.com/gtag/js?id={{ GOOGLE_ANALYTICS_ID }}"></script>
    <script nonce="{{ csp_nonce }}">
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());

        gtag('config', '{{ GOOGLE_ANALYTICS_ID }}');
    </script>
{% elif debug %}
    <!-- Google Analytics disabled in DEBUG mode (or ID not set) -->
    <script nonce="{{ csp_nonce }}">console.log("Google Analytics tracking is disabled in DEBUG mode or GOOGLE_ANALYTICS_ID is not set.");</script>
    <!-- End Google tag (gtag.js) -->
{% endif %}