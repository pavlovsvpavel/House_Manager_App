{% load i18n %}

<form method="get">
    <div class="filter-buttons">
        <label for="month-select" class="month-label">
            <select name="month" id="month">
                <option value="" disabled {% if not request.GET.month %}selected{% endif %}>{% trans "Month" %}</option>
                <option value="" {% if request.GET.month == "" %}selected{% endif %}>{% trans "All" %}</option>
                {% for choice in MonthChoices.choices %}
                    <option value="{{ choice.0 }}"
                            {% if request.GET.month == choice.0 %}selected{% endif %}>{{ choice.1 }}
                    </option>
                {% endfor %}
            </select>
        </label>

        <a href="?is_paid=True&month={{ request.GET.month }}"
           class="{% if request.GET.month == "" or not request.GET.dict %}disabled{% endif %}">
           {% trans "Without debts" %}
        </a>

        <a href="?is_paid=False&month={{ request.GET.month }}"
           class="{% if request.GET.month == "" or not request.GET.dict %}disabled{% endif %}">
           {% trans "With debts" %}
        </a>
    </div>
</form>

<script nonce="{{ csp_nonce }}">
    document.addEventListener('DOMContentLoaded', function() {
        const monthSelect = document.getElementById('month');
        if (monthSelect) {
            monthSelect.addEventListener('change', function() {
                this.form.submit();
            });
        }
        document.body.addEventListener('click', function(e) {
            if (e.target.closest('.disabled')) {
                e.preventDefault();
            }
        });
    });
</script>
